{
  "content": "* 关于Uglify的`compress`\n\n```\n compress: {\n    ecma: 5,\n    warnings: false,\n    // Disabled because of an issue with Uglify breaking seemingly valid code:\n    // https://github.com/facebook/create-react-app/issues/2376\n    // Pending further investigation:\n    // https://github.com/mishoo/UglifyJS2/issues/2011\n    comparisons: false,\n    // Disabled because of an issue with Terser breaking valid code:\n    // https://github.com/facebook/create-react-app/issues/5250\n    // Pending futher investigation:\n    // https://github.com/terser-js/terser/issues/120\n    inline: 2,\n  },\n```\n\n这里有2个问题\n\n第一个是`comparisons`的作用是二元运算的优化，例如`a = !b && !c && !d && !e`会转换成`a=!(b||c||d||e)`\n\n2376问题是使用了一个`react-mapbox-gl`的组件(google地图)\n\n编译后发生错误，经过讨论调试后，正是`comparisons`选项出现了问题，`Uglify`认为是具体代码编写没有符合规范所导致。\n\n直到18年7月，`https://github.com/mapbox/mapbox-gl-js/pull/6956`\n\n`react-mapbox-gl`修复了这个问题。\n\n第二个`inline`的作用是内联函数调用\n\n例如：\n\n```\nfunction simple(a,b){\n return a+b\n}\nfucntion complex(){\n  // ...\n  let sum=simple(1,2)\n  // ...\n  return sum\n}\n```\n将会转换为\n```\nfucntion complex(){\n  // ...\n  let sum=1+2\n  // ...\n  return sum\n}\n```\n\n`inline:2`(修改后)：内联调用带参数的简单函数\n\n`inline:3`(修改前)：内联调用带参数和带变量的简单函数\n\n个人猜测：具体出错原因可能是变量使用了作用域以外的，导致冲突。"
}
