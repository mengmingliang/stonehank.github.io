{
  "code": [
    "<pre class=\"hljs\"><code><span class=\"hljs-comment\">/**\n * @param {number[]} A\n * @param {number} K\n * @return {number}\n */</span>\n<span class=\"hljs-keyword\">var</span> maxSumAfterPartitioning = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">A, K</span>) </span>{\n  <span class=\"hljs-keyword\">let</span> N=A.length\n  <span class=\"hljs-keyword\">let</span> dp=<span class=\"hljs-built_in\">Array</span>(N+<span class=\"hljs-number\">1</span>).fill(<span class=\"hljs-number\">0</span>)\n  <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">let</span> i=<span class=\"hljs-number\">1</span>;i&lt;N+<span class=\"hljs-number\">1</span>;i++){\n    <span class=\"hljs-keyword\">let</span> curMax=<span class=\"hljs-number\">-1</span>\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">let</span> j=<span class=\"hljs-number\">1</span>;j&lt;=K &amp;&amp; i-j&gt;=<span class=\"hljs-number\">0</span>;j++){\n      curMax=<span class=\"hljs-built_in\">Math</span>.max(curMax,A[i-j])\n      dp[i]=<span class=\"hljs-built_in\">Math</span>.max(dp[i],dp[i-j]+curMax*j)\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> dp[N]\n};\n</code></pre>\n"
  ],
  "titleSlug": "partition-array-for-maximum-sum",
  "hasThinking": true,
  "thinking": "<hr>\n<p>思路：</p>\n<p><code>dp[i]</code>表示<code>[0,i-1]</code>这一段的最大和。</p>\n<p>对于索引<code>i</code>，</p>\n<p><code>dp[i-1]+A[i-1]*1</code></p>\n<p><code>Math.max(dp[i-2]+A[i-1]*2,dp[i-2]+A[i-2]*2)</code></p>\n<p><code>Math.max(dp[i-3]+A[i-1]*3, dp[i-3]+A[i-2]*3, dp[i-3]+A[i-3]*3)</code></p>\n<p>...</p>\n<p><code>Math.max(dp[i-K]+A[i-1]*K, dp[i-K]+A[i-2]*K, ..., dp[i-K]+A[i-K]*K)</code></p>\n<p>合并后，就是</p>\n<p>遍历<code>j</code>为<code>[1,K]</code>，<code>dp[i]=Math.max(dp[i],dp[i-j]+curMax*j)</code>，其中<code>curMax</code>为遍历过程中<code>A[i-j]</code>的最大值。</p>\n",
  "content": "<p>给出整数数组&nbsp;<code>A</code>，将该数组分隔为长度最多为 K 的几个（连续）子数组。分隔完成后，每个子数组的中的值都会变为该子数组中的最大值。</p>\n\n<p>返回给定数组完成分隔后的最大和。</p>\n\n<p>&nbsp;</p>\n\n<p><strong>示例：</strong></p>\n\n<pre><strong>输入：</strong>A = [1,15,7,9,2,5,10], K = 3\n<strong>输出：</strong>84\n<strong>解释：</strong>A 变为 [15,15,15,9,10,10,10]</pre>\n\n<p>&nbsp;</p>\n\n<p><strong>提示：</strong></p>\n\n<ol>\n\t<li><code>1 &lt;= K &lt;= A.length&nbsp;&lt;= 500</code></li>\n\t<li><code>0 &lt;= A[i] &lt;= 10^6</code></li>\n</ol>\n"
}
