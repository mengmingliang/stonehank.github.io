{
  "code": [
    "<pre class=\"hljs\"><code><span class=\"hljs-comment\">/**\n * @param {number[][]} M\n * @return {number[][]}\n */</span>\n<span class=\"hljs-keyword\">var</span> imageSmoother = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">M</span>) </span>{\n    <span class=\"hljs-comment\">// let l=1,t=1,r=1,d=1,lt=1,ld=1,rt=1,rd=1</span>\n    <span class=\"hljs-keyword\">let</span> newM=[]\n    <span class=\"hljs-comment\">// function getAvg(M,i,j){</span>\n    <span class=\"hljs-comment\">//     let sum=0,num=0</span>\n    <span class=\"hljs-comment\">//     if(l){sum+=M[i][j-1];num++}</span>\n    <span class=\"hljs-comment\">//     if(t){sum+=M[i-1][j];num++}    </span>\n    <span class=\"hljs-comment\">//     if(r){sum+=M[i][j+1];num++}    </span>\n    <span class=\"hljs-comment\">//     if(d){sum+=M[i+1][j];num++}</span>\n    <span class=\"hljs-comment\">//     if(lt){sum+=M[i-1][j-1];num++}   </span>\n    <span class=\"hljs-comment\">//     if(ld){sum+=M[i+1][j-1];num++}   </span>\n    <span class=\"hljs-comment\">//     if(rt){sum+=M[i-1][j+1];num++}   </span>\n    <span class=\"hljs-comment\">//     if(rd){sum+=M[i+1][j+1];num++}</span>\n    <span class=\"hljs-comment\">//     sum+=M[i][j];</span>\n    <span class=\"hljs-comment\">//     num++</span>\n    <span class=\"hljs-comment\">//     return Math.floor(sum/num)</span>\n    <span class=\"hljs-comment\">// }</span>\n    \n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">let</span> i=<span class=\"hljs-number\">0</span>;i&lt;M.length;i++){\n        newM[i]=[]\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">let</span> j=<span class=\"hljs-number\">0</span>;j&lt;M[i].length;j++){       \n            <span class=\"hljs-comment\">// l=1,t=1,r=1,d=1,lt=1,ld=1,rt=1,rd=1</span>\n            <span class=\"hljs-comment\">// if(j&lt;=0)l=lt=ld=null</span>\n            <span class=\"hljs-comment\">// if(i&lt;=0)t=lt=rt=null</span>\n            <span class=\"hljs-comment\">// if(j&gt;=M[i].length-1)r=rt=rd=null</span>\n            <span class=\"hljs-comment\">// if(i&gt;=M.length-1)d=ld=rd=null</span>\n            newM[i][j]=getAvg(M,i,j)\n        }\n    }\n    \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getAvg</span>(<span class=\"hljs-params\">M,i,j</span>)</span>{\n        <span class=\"hljs-keyword\">let</span> sum=<span class=\"hljs-number\">0</span>,nums=<span class=\"hljs-number\">0</span>\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">let</span> x=<span class=\"hljs-number\">-1</span>;x&lt;<span class=\"hljs-number\">2</span>;x++){\n            <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">let</span> y=<span class=\"hljs-number\">-1</span>;y&lt;<span class=\"hljs-number\">2</span>;y++){\n                <span class=\"hljs-keyword\">let</span> xi=x+i,yj=y+j\n                <span class=\"hljs-keyword\">if</span>(xi&lt;<span class=\"hljs-number\">0</span> || xi&gt;M.length<span class=\"hljs-number\">-1</span> || yj&lt;<span class=\"hljs-number\">0</span> || yj&gt;M[i].length<span class=\"hljs-number\">-1</span>){\n                    <span class=\"hljs-keyword\">continue</span>\n                }\n                sum+=M[xi][yj]\n                nums++\n            }\n        }\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">Math</span>.floor(sum/nums)\n    }\n    \n    <span class=\"hljs-keyword\">return</span> newM\n};\n</code></pre>\n"
  ],
  "titleSlug": "image-smoother",
  "hasThinking": false,
  "content": "<p>包含整数的二维矩阵 M 表示一个图片的灰度。你需要设计一个平滑器来让每一个单元的灰度成为平均灰度&nbsp;(向下舍入) ，平均灰度的计算是周围的8个单元和它本身的值求平均，如果周围的单元格不足八个，则尽可能多的利用它们。</p>\n\n<p><strong>示例 1:</strong></p>\n\n<pre>\n<strong>输入:</strong>\n[[1,1,1],\n [1,0,1],\n [1,1,1]]\n<strong>输出:</strong>\n[[0, 0, 0],\n [0, 0, 0],\n [0, 0, 0]]\n<strong>解释:</strong>\n对于点 (0,0), (0,2), (2,0), (2,2): 平均(3/4) = 平均(0.75) = 0\n对于点 (0,1), (1,0), (1,2), (2,1): 平均(5/6) = 平均(0.83333333) = 0\n对于点 (1,1): 平均(8/9) = 平均(0.88888889) = 0\n</pre>\n\n<p><strong>注意:</strong></p>\n\n<ol>\n\t<li>给定矩阵中的整数范围为 [0, 255]。</li>\n\t<li>矩阵的长和宽的范围均为&nbsp;[1, 150]。</li>\n</ol>\n"
}
