{
  "code": [
    "/**\n * @param {number[]} price\n * @param {number[][]} special\n * @param {number[]} needs\n * @return {number}\n */\nvar shoppingOffers = function(price, special, needs) {\n  let originSum=0\n  for(let i=0;i<needs.length;i++){\n    originSum+=needs[i]*price[i]\n  }\n  function calcLastNeed(need,offer){\n    for(let i=0;i<need.length;i++){\n      if(need[i]>=offer[i]){\n        need[i]-=offer[i]\n      }else{\n        return null\n      }\n    }\n    return need\n  }\n\n  function calcSum(need,flag){\n    let min=Infinity\n    for(let i=0;i<special.length;i++){\n      let sum=0\n      let sliceNeed=need.slice()\n      let offer=special[i],offerP=offer[offer.length-1]\n      let lastNeed=calcLastNeed(sliceNeed,offer)\n      // console.log(lastNeed)\n      if(lastNeed) {\n        let _sum=calcSum(lastNeed,true)\n        if(_sum===Infinity){\n          flag=true\n          _sum=0\n        }else flag=false\n        sum+=offerP+_sum\n      }\n      else continue\n      if(flag){\n        for(let i=0;i<lastNeed.length;i++){\n          sum+=lastNeed[i]*price[i]\n        }\n      }\n      if(sum<min)min=sum\n    }\n    return min\n  }\n  return Math.min(originSum,calcSum(needs,true))\n};"
  ],
  "titleSlug": "shopping-offers",
  "content": "<p>\r\nIn LeetCode Store, there are some kinds of items to sell. Each item has a price.\r\n</p>\r\n\r\n<p>\r\nHowever, there are some special offers, and a special offer consists of one or more different kinds of items with a sale price.\r\n</p>\r\n\r\n<p>\r\nYou are given the each item's price, a set of special offers, and the number we need to buy for each item.\r\nThe job is to output the lowest price you have to pay for <b>exactly</b> certain items as given, where you could make optimal use of the special offers.\r\n</p>\r\n\r\n<p>\r\nEach special offer is represented in the form of an array, the last number represents the price you need to pay for this special offer, other numbers represents how many specific items you could get if you buy this offer.\r\n</p>\r\n\r\n<p>You could use any of special offers as many times as you want.</p>\r\n\r\n<p><b>Example 1:</b><br />\r\n<pre>\r\n<b>Input:</b> [2,5], [[3,0,5],[1,2,10]], [3,2]\r\n<b>Output:</b> 14\r\n<b>Explanation:</b> \r\nThere are two kinds of items, A and B. Their prices are $2 and $5 respectively. \r\nIn special offer 1, you can pay $5 for 3A and 0B\r\nIn special offer 2, you can pay $10 for 1A and 2B. \r\nYou need to buy 3A and 2B, so you may pay $10 for 1A and 2B (special offer #2), and $4 for 2A.\r\n</pre>\r\n</p>\r\n\r\n<p><b>Example 2:</b><br />\r\n<pre>\r\n<b>Input:</b> [2,3,4], [[1,1,0,4],[2,2,1,9]], [1,2,1]\r\n<b>Output:</b> 11\r\n<b>Explanation:</b> \r\nThe price of A is $2, and $3 for B, $4 for C. \r\nYou may pay $4 for 1A and 1B, and $9 for 2A ,2B and 1C. \r\nYou need to buy 1A ,2B and 1C, so you may pay $4 for 1A and 1B (special offer #1), and $3 for 1B, $4 for 1C. \r\nYou cannot add more items, though only $9 for 2A ,2B and 1C.\r\n</pre>\r\n</p>\r\n\r\n<p><b>Note:</b><br />\r\n<ol>\r\n<li>There are at most 6 kinds of items, 100 special offers.</li>\r\n<li>For each item, you need to buy at most 6 of them.</li>\r\n<li>You are <b>not</b> allowed to buy more items than you want, even if that would lower the overall price.</li>\r\n</ol>\r\n</p>",
  "translatedContent": "<p>在LeetCode商店中， 有许多在售的物品。</p>\n\n<p>然而，也有一些大礼包，每个大礼包以优惠的价格捆绑销售一组物品。</p>\n\n<p>现给定每个物品的价格，每个大礼包包含物品的清单，以及待购物品清单。请输出<strong>确切</strong>完成待购清单的最低花费。</p>\n\n<p>每个大礼包的由一个数组中的一组数据描述，最后一个数字代表大礼包的价格，其他数字分别表示内含的其他种类物品的数量。</p>\n\n<p>任意大礼包可无限次购买。</p>\n\n<p><strong>示例 1:</strong></p>\n\n<pre>\n<strong>输入:</strong> [2,5], [[3,0,5],[1,2,10]], [3,2]\n<strong>输出:</strong> 14\n<strong>解释:</strong> \n有A和B两种物品，价格分别为&yen;2和&yen;5。\n大礼包1，你可以以&yen;5的价格购买3A和0B。\n大礼包2， 你可以以&yen;10的价格购买1A和2B。\n你需要购买3个A和2个B， 所以你付了&yen;10购买了1A和2B（大礼包2），以及&yen;4购买2A。</pre>\n\n<p><strong>示例 2:</strong></p>\n\n<pre>\n<strong>输入:</strong> [2,3,4], [[1,1,0,4],[2,2,1,9]], [1,2,1]\n<strong>输出:</strong> 11\n<strong>解释:</strong> \nA，B，C的价格分别为&yen;2，&yen;3，&yen;4.\n你可以用&yen;4购买1A和2B，也可以用&yen;9购买2A，2B和1C。\n你需要买1A，2B和1C，所以你付了&yen;4买了1A和1B（大礼包1），以及&yen;3购买1B， &yen;4购买1C。\n你不可以购买超出待购清单的物品，尽管购买大礼包2更加便宜。\n</pre>\n\n<p><strong>说明:</strong></p>\n\n<ol>\n\t<li>最多6种物品， 100种大礼包。</li>\n\t<li>每种物品，你最多只需要购买6个。</li>\n\t<li>你不可以购买超出待购清单的物品，即使更便宜。</li>\n</ol>\n"
}
