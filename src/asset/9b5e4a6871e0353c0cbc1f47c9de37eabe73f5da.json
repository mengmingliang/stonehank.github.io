{
  "content": "* ä¸ºä»€ä¹ˆè¦å®ç°ä¸€ä¸ª`GraphQL`æœåŠ¡å™¨\n\n    é€šè¿‡è‡ªå·±å®ç°ï¼Œæ›´æ·±å…¥äº†è§£`GraphQL`æ€ä¹ˆæ„é€ ï¼Œæ€ä¹ˆè·å–ï¼Œä¸€äº›æœ¯è¯­\n\n* ç›´æ¥å…¥æ­£é¢˜ï¼Œå¦‚ä½•å®ç°ä¸€ä¸ª`GraphQL`æœåŠ¡å™¨\n\n    äº†è§£4ç§ç±»å‹\n    \n    * Query\n    \n        æ‰§è¡Œå†…å®¹æŸ¥è¯¢\n        \n    * Mutation\n        \n        æ‰§è¡Œå†…å®¹å˜æ›´\n        \n    * Schema\n    \n        æ¨¡å¼ï¼Œå®šä¹‰å†…å®¹ç»“æ„åŠç±»å‹\n        \n    * Resolvers\n    \n        è¿æ¥`Schema`å’Œ`Query`ï¼Œä¹Ÿå°±æ˜¯å…·ä½“å†…å®¹ã€‚\n        \n\n1. å®šä¹‰Schema\n\n    ```js\n    import { gql } from 'apollo-server-express';\n    \n    const typeDefs = gql`\n        type Person {\n            id: Int\n            name: String\n            gender: String\n            homeworld: String\n        }\n        input DataInput {\t\t\n            id: Int!\n            name: String\n            gender: String\n            homeworld: String\n        }\n        type Mutation {\n            setPerson(input:DataInput!):Person\n        }\n        type Query {\n            allPeople: [Person]\n            person(id: Int!): Person\n        }\n    `;\n    \n    export default typeDefs;\n    ```\n    \n    è¿™é‡Œå®šä¹‰äº†1ä¸ªè‡ªå®šä¹‰æŸ¥è¯¢ç±»`Person`ï¼Œ1ä¸ªè‡ªå®šä¹‰ä¿®æ”¹ç±»`DataInput`ï¼Œ1ä¸ª`Mutation`æ–¹æ³•ï¼Œ2ä¸ª`Query`æ–¹æ³•ï¼Œå…¶ä¸­åŠ `!`è¡¨ç¤ºè¿™ä¸ªå­—æ®µä¸å¯ç¼ºå°‘ã€‚\n\n2. å®šä¹‰`Resolvers`\n\n    ```js\n    const defaultData = [\n      {\n        id: 1,\n        name: 'Luke SkyWaler',\n        gender: 'male',\n        homeworld: 'Tattoine'\n      },\n      {\n        id: 2,\n        name: 'C-3PO',\n        gender: 'bot',\n        homeworld: 'Tattoine'\n      }\n    ];\n    \n    const resolvers = {\n      Mutation: {\n        setPerson: (firstParam, {input}) => {\n          let matchIdx = defaultData.length\n          const {id} = input\n          let matchObj = defaultData.find((obj, i) => {\n            if (obj.id === id) {\n              matchIdx = i\n              return true\n            }\n          })\n          let defaultObj\n          if (matchObj) defaultObj = matchObj\n          else defaultObj = {name: '', gender: '', homeworld: ''}\n          let newObj = Object.assign(defaultObj, input)\n          defaultData[matchIdx] = newObj\n          return newObj\n        }\n      },\n      Query: {\n        allPeople: () => {\n          return defaultData;\n        },\n        person: (root, {id}) => {\n          return defaultData.filter(character => {\n            return (character.id === id);\n          })[0];\n        }\n      }\n    };\n    \n    export default resolvers;\n    ```\n    \n    è¿™é‡Œå®šä¹‰äº†å¯¹`Query`å’Œ`Mutation`çš„å…·ä½“æ‰§è¡Œæ–¹æ³•ï¼Œæ³¨æ„ï¼Œå®ƒä»¬çš„å€¼å¿…é¡»æ˜¯`Object`æˆ–è€…`Function`ã€‚\n    \n    > PS: è¿™é‡Œæˆ‘æ²¡ææ¸…æ¥š `Mutation` ç¬¬ä¸€ä¸ªå‚æ•°`firstParam`çš„ä½œç”¨ï¼Œä¸€ç›´éƒ½æ˜¯`undefined`\n\n3. åˆ›å»ºæœåŠ¡å™¨\n\n    ```js\n    import express from 'express';\n    import {ApolloServer, gql } from 'apollo-server-express';\n    import typeDefs from './api/schema';\n    import resolvers from './api/resolvers';\n    \n    const server = new ApolloServer({\n      typeDefs,\n      resolvers,\n    });\n    \n    const app = express();\n    server.applyMiddleware({ app });\n    \n    app.get('/', (req, res) => res.send('Babel Working!'));\n    \n    app.listen({ port: 4000 }, () =>\n      console.log(`ğŸš€ Server ready at http://localhost:4000${server.graphqlPath}`)\n    );\n    ```\n\n4. package.json\n\n    ```\n    {\n      \"name\": \"gh-demo\",\n      \"version\": \"1.0.0\",\n      \"description\": \"\",\n      \"main\": \"index.js\",\n      \"scripts\": {\n      \"dev\": \"babel-watch index.js\"\n    },\n      \"keywords\": [],\n      \"author\": \"\",\n      \"license\": \"ISC\",\n      \"dependencies\": {\n        \"apollo-server-express\": \"^2.2.1\",\n        \"express\": \"^4.16.4\",\n        \"graphql\": \"^14.0.2\"\n    },\n      \"devDependencies\": {\n      \"babel-cli\": \"^6.26.0\",\n        \"babel-preset-env\": \"^1.7.0\",\n        \"babel-watch\": \"^2.0.7\"\n    }\n    }\n    ```\n\nå‚è€ƒï¼š[Creating a GraphQL server with NodeJS](https://medium.com/crowdbotics/creating-a-graphql-server-with-nodejs-ef9814a7e0e6)"
}
