(window.webpackJsonp=window.webpackJsonp||[]).push([[593],{1112:function(n){n.exports={content:'<h2>popstate</h2>\n<p>\u53ea\u5728\u6d4f\u89c8\u5668\u4e0b\u524d\u8fdb\u540e\u9000\u548c\u6539\u53d8hash\u89e6\u53d1\uff0c<code>pushState</code>\u548c<code>replaceState</code>\u5e76\u4e0d\u4f1a\u89e6\u53d1</p>\n<p>\u6e90\u7801\u4e2d\u7ed9<code>popstate</code>\u548c<code>navigate</code>\u4e8b\u4ef6\u7ed1\u5b9a\u4e86\u4e00\u65e6\u6267\u884c\u5c31\u66f4\u65b0\u5f53\u524dlocation(\u4f20\u9012\u5230context\u4e2d\u7684)</p>\n<h2>\u66ff\u4ee3pushState\u548creplaceState</h2>\n<p>\u6e90\u7801\u4e2d\u5bf9<code>pushState</code>\u548c<code>replaceState</code>\u64cd\u4f5c\u7528<code>try...catch</code>\u5305\u88f9\uff0c\u56e0\u4e3a\u6709\u4e00\u4e2abug\uff0c<a href="https://forums.developer.apple.com/thread/36650">iOS Safari limits to 100 pushState calls</a></p>\n<p>\u56e0\u6b64\u5f53\u51fa\u73b0catch\uff0c\u4f1a\u6267\u884c<code>location.replace</code>\u6216\u8005<code>location.assign</code></p>\n<ul>\n<li><code>location.replace</code> \u8df3\u8f6curl\uff0c\u66ff\u4ee3\u5f53\u524d\uff0c\u4e0d\u589e\u52a0\u5386\u53f2\u8bb0\u5f55</li>\n<li><code>location.assign</code> \u8df3\u8f6curl\uff0c\u589e\u52a0\u5386\u53f2\u8bb0\u5f55</li>\n</ul>\n<h2>createContext(defaultValue)</h2>\n<p>\u5b98\u65b9(\u82f1\u6587)\uff1a</p>\n<blockquote>\n<p>If there is no Provider for this context above, the value argument will be equal to the defaultValue that was passed to createContext().</p>\n</blockquote>\n<p>\u4e2d\u6587\u6587\u6863\uff1a</p>\n<blockquote>\n<p>\u5982\u679c\u4e0a\u5c42\u7684\u7ec4\u4ef6\u6811\u6ca1\u6709\u4e00\u4e2a\u5339\u914d\u7684 Provider\uff0c\u800c\u6b64\u65f6\u4f60\u9700\u8981\u6e32\u67d3\u4e00\u4e2a Consumer \u7ec4\u4ef6\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u7528\u5230 defaultValue \u3002\u8fd9\u6709\u52a9\u4e8e\u5728\u4e0d\u5c01\u88c5\u5b83\u4eec\u7684\u60c5\u51b5\u4e0b\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u6d4b\u8bd5\u3002</p>\n</blockquote>\n<p>\u6e90\u7801\u4e2d\u8fd9\u4e48\u7528\u7684</p>\n<pre class="hljs"><code><span class="hljs-keyword">const</span> createNamedContext = <span class="hljs-function">(<span class="hljs-params">name, defaultValue</span>) =&gt;</span> {\n  <span class="hljs-keyword">const</span> Ctx = createContext(defaultValue);\n  Ctx.Consumer.displayName = <span class="hljs-string">`<span class="hljs-subst">${name}</span>.Consumer`</span>;\n  Ctx.Provider.displayName = <span class="hljs-string">`<span class="hljs-subst">${name}</span>.Provider`</span>;\n  <span class="hljs-keyword">return</span> Ctx;\n};\n\n<span class="hljs-keyword">let</span> BaseContext = createNamedContext(<span class="hljs-string">"Base"</span>, { <span class="hljs-attr">baseuri</span>: <span class="hljs-string">"/"</span>, <span class="hljs-attr">basepath</span>: <span class="hljs-string">"/"</span> });\n\n<span class="hljs-keyword">let</span> Router = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (\n  &lt;BaseContext.Consumer&gt;\n    {/* \u6b64\u5904baseContext\u662f { baseuri: "/", basepath: "/" } */}\n    {baseContext =&gt; (\n      &lt;Location&gt;\n        {locationContext =&gt; (\n          &lt;RouterImpl {...baseContext} {...locationContext} {...props} /&gt;\n        )}\n      &lt;/Location&gt;\n    )}\n  &lt;/BaseContext.Consumer&gt;\n</code></pre>\n<h2>\u5de5\u5177\u4ecb\u7ecd invariant</h2>\n<p><code>invariant(boolean,something)</code> \u53c2\u65701\u4e3afalse\u5c31<code>throw \u53c2\u65702(something)</code></p>\n<h2>react\u4e2delement.type</h2>\n<p>\u7528\u6765\u5224\u65ad\u7ec4\u4ef6\u7684\u7c7b\u578b</p>\n<p>\u4f8b\u5982\uff1a</p>\n<pre class="hljs"><code><span class="hljs-comment">// 1\u3001\u9ad8\u9636\u7ec4\u4ef6</span>\n<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HOC</span>(<span class="hljs-params">com</span>)</span>{\n  <span class="hljs-keyword">return</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>{\n    render(){\n      <span class="hljs-keyword">return</span> &lt;com /&gt;\n    }\n  }\n}\n// 2\u3001\u81ea\u5b9a\u4e49\u7ec4\u4ef6\nclass MyComponent extends React.Component{\n    render(){\n        return &lt;div&gt;...&lt;/div&gt;\n    }\n}\n// 3\u3001\u65e0\u72b6\u6001\u7ec4\u4ef6\nfunction DumbComponent(props){\n    return &lt;button&gt;show&lt;/button&gt;\n}\n// 4\u3001\u539f\u751f\u6807\u7b7e\uff08\u76f4\u63a5\u5199\u5230children\u91cc\uff09\n\n// \u5224\u65ad\nfunction checkType(element){\n    let type=element.type\n    if(type.prototype &amp;&amp; type.prototype.isReactComponent){\n        console.log(\'\u81ea\u5b9a\u4e49React\u7ec4\u4ef6\')\n    }else if(typeof type === \'function\'){\n        console.log(\'\u662f\u4e00\u4e2a\u51fd\u6570\uff08\u9ad8\u9636\u51fd\u6570\uff09\uff0c\u7ee7\u7eed\u8c03\u7528\')\n    }else if(typeof type === \'string\'){\n        console.log(\'\u662f\u4e00\u4e2a\u539f\u751f\u6807\u7b7e\')\n    }else{\n        console.log(\'\u5176\u4ed6\')\n    }\n}\nclass Check extends React.Component{\n  render(){\n    React.Children.map(this.props.children,element=&gt;{\n      checkType(element)\n    })\n    return &lt;div /&gt;\n  }\n}\nReactDOM.render(\n  &lt;Check&gt;\n    &lt;HOC /&gt;      \n    &lt;MyComponent /&gt;\n    &lt;DumbComponent /&gt;\n    &lt;div /&gt;\n  &lt;/Check&gt;,\n  document.getElementById(\'container\')\n);\n/*\n"\u662f\u4e00\u4e2a\u51fd\u6570\uff08\u9ad8\u9636\u51fd\u6570\uff09\uff0c\u7ee7\u7eed\u8c03\u7528"\n"\u81ea\u5b9a\u4e49React\u7ec4\u4ef6"\n"\u662f\u4e00\u4e2a\u51fd\u6570\uff08\u9ad8\u9636\u51fd\u6570\uff09\uff0c\u7ee7\u7eed\u8c03\u7528"\uff08\u6b64\u5904\u65e0\u72b6\u6001\u51fd\u6570\u7ec4\u4ef6\u4f1a\u88ab\u8ba4\u4e3a\u51fd\u6570\uff09\n"\u662f\u4e00\u4e2a\u539f\u751f\u6807\u7b7e"\n*/\n</code></pre>\n<p>\u6e90\u7801\u4e2d\u7528\u6765\u68c0\u6d4b\u662f\u5426\u91cd\u5b9a\u5411\u7ec4\u4ef6\uff1a</p>\n<pre class="hljs"><code><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RouterImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">PureComponent</span> </span>{\n    render(){\n        <span class="hljs-comment">/* \u5176\u4ed6\u4ee3\u7801 */</span>\n        <span class="hljs-keyword">let</span> routes = React.Children.map(children, createRoute(basepath));\n        <span class="hljs-comment">/* \u5176\u4ed6\u4ee3\u7801 */</span>\n    }        \n}\n\n<span class="hljs-keyword">let</span> createRoute = <span class="hljs-function"><span class="hljs-params">basepath</span> =&gt;</span> element =&gt; {\n    <span class="hljs-comment">// element.type === Redirect \u7528\u4e8e\u68c0\u6d4b\u662f\u5426\u67d0\u4e2a\u7ec4\u4ef6</span>\n    invariant(\n        element.props.path || element.props.default || element.type === Redirect,\n        <span class="hljs-string">`&lt;Router&gt;: Children of &lt;Router&gt; must have a \\`path\\` or \\`default\\` prop, or be a \\`&lt;Redirect&gt;\\`. None found on element type \\`<span class="hljs-subst">${\n         element.type\n        }</span>\\``</span>\n     );\n  <span class="hljs-comment">/* \u5176\u4ed6\u4ee3\u7801 */</span>\n}\n\n<span class="hljs-comment">// \u8fd9\u91ccRedirect\u662f\u4e2a\u65e0\u72b6\u6001\u7ec4\u4ef6  </span>\n<span class="hljs-keyword">let</span> Redirect = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (\n  &lt;Location&gt;\n    {locationContext =&gt; &lt;RedirectImpl {...locationContext} {...props} /&gt;}\n  &lt;/Location&gt;\n);\n</code></pre>\n'}}}]);
//# sourceMappingURL=sourceCode-content61.1cb9c1ec.chunk.js.map