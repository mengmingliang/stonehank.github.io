(window.webpackJsonp=window.webpackJsonp||[]).push([[1020],{1031:function(s){s.exports={code:['<pre class="hljs"><code><span class="hljs-comment">/**\n * Initialize your data structure here.\n */</span>\n<span class="hljs-keyword">var</span> TimeMap = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{\n  <span class="hljs-keyword">this</span>.hash={}\n};\n\n<span class="hljs-comment">/** \n * @param {string} key \n * @param {string} value \n * @param {number} timestamp\n * @return {void}\n */</span>\nTimeMap.prototype.set = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value, timestamp</span>) </span>{\n  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.hash[key]==<span class="hljs-literal">null</span>)<span class="hljs-keyword">this</span>.hash[key]=[]\n  <span class="hljs-keyword">this</span>.hash[key].push([value,timestamp])\n};\n\n<span class="hljs-comment">/** \n * @param {string} key \n * @param {number} timestamp\n * @return {string}\n */</span>\nTimeMap.prototype.get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, timestamp</span>) </span>{\n  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bsFront</span>(<span class="hljs-params">arr,n</span>)</span>{\n    <span class="hljs-keyword">let</span> lo=<span class="hljs-number">0</span>,hi=arr.length<span class="hljs-number">-1</span>\n    <span class="hljs-keyword">while</span>(lo&lt;hi){\n      <span class="hljs-keyword">let</span> mid=<span class="hljs-built_in">Math</span>.ceil((lo+hi)/<span class="hljs-number">2</span>)\n      <span class="hljs-keyword">if</span>(arr[mid][<span class="hljs-number">1</span>]&gt;n)hi=mid<span class="hljs-number">-1</span>\n      <span class="hljs-keyword">else</span> lo=mid\n    }\n    <span class="hljs-keyword">return</span> lo\n  }\n  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.hash[key]==<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span> <span class="hljs-string">\'\'</span>\n  <span class="hljs-keyword">let</span> cand=<span class="hljs-keyword">this</span>.hash[key]\n  <span class="hljs-keyword">if</span>(timestamp&lt;cand[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>])<span class="hljs-keyword">return</span> <span class="hljs-string">\'\'</span>\n  <span class="hljs-keyword">let</span> idx=bsFront(cand,timestamp)\n  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hash[key][idx][<span class="hljs-number">0</span>]\n};\n\n<span class="hljs-comment">/** \n * Your TimeMap object will be instantiated and called as such:\n * var obj = Object.create(TimeMap).createNew()\n * obj.set(key,value,timestamp)\n * var param_2 = obj.get(key,timestamp)\n */</span>\n</code></pre>\n'],titleSlug:"time-based-key-value-store",hasThinking:!1,content:"<p>\u521b\u5efa\u4e00\u4e2a\u57fa\u4e8e\u65f6\u95f4\u7684\u952e\u503c\u5b58\u50a8\u7c7b&nbsp;<code>TimeMap</code>\uff0c\u5b83\u652f\u6301\u4e0b\u9762\u4e24\u4e2a\u64cd\u4f5c\uff1a</p>\n\n<p>1. <code>set(string key, string value, int timestamp)</code></p>\n\n<ul>\n\t<li>\u5b58\u50a8\u952e&nbsp;<code>key</code>\u3001\u503c&nbsp;<code>value</code>\uff0c\u4ee5\u53ca\u7ed9\u5b9a\u7684\u65f6\u95f4\u6233&nbsp;<code>timestamp</code>\u3002</li>\n</ul>\n\n<p>2. <code>get(string key, int timestamp)</code></p>\n\n<ul>\n\t<li>\u8fd4\u56de\u5148\u524d\u8c03\u7528&nbsp;<code>set(key, value, timestamp_prev)</code>&nbsp;\u6240\u5b58\u50a8\u7684\u503c\uff0c\u5176\u4e2d&nbsp;<code>timestamp_prev &lt;= timestamp</code>\u3002</li>\n\t<li>\u5982\u679c\u6709\u591a\u4e2a\u8fd9\u6837\u7684\u503c\uff0c\u5219\u8fd4\u56de\u5bf9\u5e94\u6700\u5927\u7684&nbsp;&nbsp;<code>timestamp_prev</code>&nbsp;\u7684\u90a3\u4e2a\u503c\u3002</li>\n\t<li>\u5982\u679c\u6ca1\u6709\u503c\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\uff08<code>&quot;&quot;</code>\uff09\u3002</li>\n</ul>\n\n<p>&nbsp;</p>\n\n<p><strong>\u793a\u4f8b 1\uff1a</strong></p>\n\n<pre><strong>\u8f93\u5165\uff1a</strong>inputs = [&quot;TimeMap&quot;,&quot;set&quot;,&quot;get&quot;,&quot;get&quot;,&quot;set&quot;,&quot;get&quot;,&quot;get&quot;], inputs = [[],[&quot;foo&quot;,&quot;bar&quot;,1],[&quot;foo&quot;,1],[&quot;foo&quot;,3],[&quot;foo&quot;,&quot;bar2&quot;,4],[&quot;foo&quot;,4],[&quot;foo&quot;,5]]\n<strong>\u8f93\u51fa\uff1a</strong>[null,null,&quot;bar&quot;,&quot;bar&quot;,null,&quot;bar2&quot;,&quot;bar2&quot;]\n<strong>\u89e3\u91ca\uff1a</strong>&nbsp; \nTimeMap kv; &nbsp; \nkv.set(&quot;foo&quot;, &quot;bar&quot;, 1); // \u5b58\u50a8\u952e &quot;foo&quot; \u548c\u503c &quot;bar&quot; \u4ee5\u53ca\u65f6\u95f4\u6233 timestamp = 1 &nbsp; \nkv.get(&quot;foo&quot;, 1);  // \u8f93\u51fa &quot;bar&quot; &nbsp; \nkv.get(&quot;foo&quot;, 3); // \u8f93\u51fa &quot;bar&quot; \u56e0\u4e3a\u5728\u65f6\u95f4\u6233 3 \u548c\u65f6\u95f4\u6233 2 \u5904\u6ca1\u6709\u5bf9\u5e94 &quot;foo&quot; \u7684\u503c\uff0c\u6240\u4ee5\u552f\u4e00\u7684\u503c\u4f4d\u4e8e\u65f6\u95f4\u6233 1 \u5904\uff08\u5373 &quot;bar&quot;\uff09 &nbsp; \nkv.set(&quot;foo&quot;, &quot;bar2&quot;, 4); &nbsp; \nkv.get(&quot;foo&quot;, 4); // \u8f93\u51fa &quot;bar2&quot; &nbsp; \nkv.get(&quot;foo&quot;, 5); // \u8f93\u51fa &quot;bar2&quot; &nbsp; \n\n</pre>\n\n<p><strong>\u793a\u4f8b 2\uff1a</strong></p>\n\n<pre><strong>\u8f93\u5165\uff1a</strong>inputs = [&quot;TimeMap&quot;,&quot;set&quot;,&quot;set&quot;,&quot;get&quot;,&quot;get&quot;,&quot;get&quot;,&quot;get&quot;,&quot;get&quot;], inputs = [[],[&quot;love&quot;,&quot;high&quot;,10],[&quot;love&quot;,&quot;low&quot;,20],[&quot;love&quot;,5],[&quot;love&quot;,10],[&quot;love&quot;,15],[&quot;love&quot;,20],[&quot;love&quot;,25]]\n<strong>\u8f93\u51fa\uff1a</strong>[null,null,null,&quot;&quot;,&quot;high&quot;,&quot;high&quot;,&quot;low&quot;,&quot;low&quot;]\n</pre>\n\n<p>&nbsp;</p>\n\n<p><strong>\u63d0\u793a\uff1a</strong></p>\n\n<ol>\n\t<li>\u6240\u6709\u7684\u952e/\u503c\u5b57\u7b26\u4e32\u90fd\u662f\u5c0f\u5199\u7684\u3002</li>\n\t<li>\u6240\u6709\u7684\u952e/\u503c\u5b57\u7b26\u4e32\u957f\u5ea6\u90fd\u5728&nbsp;<code>[1, 100]</code>&nbsp;\u8303\u56f4\u5185\u3002</li>\n\t<li>\u6240\u6709&nbsp;<code>TimeMap.set</code>&nbsp;\u64cd\u4f5c\u4e2d\u7684\u65f6\u95f4\u6233&nbsp;<code>timestamps</code> \u90fd\u662f\u4e25\u683c\u9012\u589e\u7684\u3002</li>\n\t<li><code>1 &lt;= timestamp &lt;= 10^7</code></li>\n\t<li><code>TimeMap.set</code> \u548c&nbsp;<code>TimeMap.get</code>&nbsp;\u51fd\u6570\u5728\u6bcf\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u4e2d\u5c06\uff08\u7ec4\u5408\uff09\u8c03\u7528\u603b\u8ba1&nbsp;<code>120000</code> \u6b21\u3002</li>\n</ol>\n"}}}]);
//# sourceMappingURL=sourceCode-content996.803f2e50.chunk.js.map